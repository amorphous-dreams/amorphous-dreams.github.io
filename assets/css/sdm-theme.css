/* trait + power cards */
.markdown-body .trait-card,
.markdown-body .power-card {
  margin: clamp(10px, 1.4vw, 16px) 0;
  padding: clamp(14px, 1.6vw, 22px);
  background: linear-gradient(135deg, rgba(60, 56, 54, 0.92), rgba(29, 26, 24, 0.92));
  border: 1px solid var(--card-border);
  border-radius: var(--card-radius);
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
  position: relative;
  overflow: hidden;
}

.markdown-body .trait-card::before,
.markdown-body .power-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 18% 12%, rgba(254, 128, 25, 0.16), transparent 45%),
    radial-gradient(circle at 88% 20%, rgba(184, 187, 38, 0.12), transparent 50%),
    linear-gradient(90deg, rgba(131, 165, 152, 0.08), transparent 65%);
  opacity: 0.5;
  pointer-events: none;
  z-index: 0;
}

.markdown-body .trait-card > *,
.markdown-body .power-card > * {
  position: relative;
  z-index: 1;
}

body.book-chapter .markdown-body .trait-card h2,
body.book-chapter .markdown-body .trait-card h4,
body.book-chapter .markdown-body .power-card h2,
body.book-chapter .markdown-body .power-card h4,
.markdown-body .trait-card h2,
.markdown-body .trait-card h4,
.markdown-body .power-card h2,
.markdown-body .power-card h4 {
  margin: 0 0 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(131, 165, 152, 0.35);
  box-shadow: inset 0 -1px 0 rgba(254, 128, 25, 0.25);
  color: var(--flare);
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

body.book-chapter .markdown-body .trait-card blockquote,
.markdown-body .trait-card blockquote,
body.book-chapter .markdown-body .power-card blockquote,
.markdown-body .power-card blockquote {
  margin: 8px 0;
  padding: 8px 12px;
  background: rgba(29, 26, 24, 0.6);
  border-left: 2px solid rgba(254, 128, 25, 0.45);
  border-radius: 12px;
  color: var(--ink);
}

body.book-chapter .markdown-body .trait-card > p:has(+ blockquote),
body.book-chapter .markdown-body .power-card > p:has(+ blockquote),
.markdown-body .trait-card > p:has(+ blockquote),
.markdown-body .power-card > p:has(+ blockquote) {
  color: #d65d0e;
}

body.book-chapter .markdown-body .trait-card blockquote p,
.markdown-body .trait-card blockquote p,
body.book-chapter .markdown-body .power-card blockquote p,
.markdown-body .power-card blockquote p {
  margin-bottom: 0.5em;
}

.markdown-body .trait-card .trait-return,
.markdown-body .power-card .power-return {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.markdown-body .trait-card .trait-return a,
.markdown-body .power-card .power-return a {
  color: var(--glow);
  text-decoration: none;
}

.markdown-body .trait-card .trait-return a:hover,
.markdown-body .trait-card .trait-return a:focus-visible,
.markdown-body .power-card .power-return a:hover,
.markdown-body .power-card .power-return a:focus-visible {
  color: var(--flare);
}
